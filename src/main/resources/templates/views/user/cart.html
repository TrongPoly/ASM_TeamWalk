<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<!-- Mobile Specific Meta -->
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no">
<!-- Favicon-->
<link rel="shortcut icon" href="img/fav.png">
<!-- Author Meta -->
<meta name="author" content="CodePixar">
<!-- Meta Description -->
<meta name="description" content="">
<!-- Meta Keyword -->
<meta name="keywords" content="">
<!-- meta character set -->
<meta charset="UTF-8">
<!-- Site Title -->
<title>T electronic device</title>
<!--
			CSS
			============================================= -->
<link rel="stylesheet" th:href="@{/css/linearicons.css}">
<link rel="stylesheet" th:href="@{/css/font-awesome.min.css}">
<link rel="stylesheet" th:href="@{/css/themify-icons.css}">
<link rel="stylesheet" th:href="@{/css/bootstrap.css}">
<link rel="stylesheet" th:href="@{/css/owl.carousel.css}">
<link rel="stylesheet" th:href="@{/css/nice-select.css}">
<link rel="stylesheet" th:href="@{/css/nouislider.min.css}">
<link rel="stylesheet" th:href="@{/css/ion.rangeSlider.css}" />
<link rel="stylesheet" th:href="@{/css/ion.rangeSlider.skinFlat.css}" />
<link rel="stylesheet" th:href="@{/css/main.css}">
</head>

<body>

	<!-- Start Header Area -->
	<div th:replace="~{fragments/header :: header}"></div>
	<!-- End Header Area -->
	<!-- Start Banner Area -->
	<section class="banner-area organic-breadcrumb">
		<div class="container">
			<div
				class="breadcrumb-banner d-flex flex-wrap align-items-center justify-content-end">
				<div class="col-first">
					<h1>Cart Page</h1>
					<nav class="d-flex align-items-center">
						<a href="index.html">Home<span class="lnr lnr-arrow-right"></span></a>
						<a href="#">Product<span class="lnr lnr-arrow-right"></span></a> <a
							href="chitiet.html">Cart</a>
					</nav>
				</div>
			</div>
		</div>
	</section>
	<!-- End Banner Area -->

	<!--================Single Product Area =================-->
	<div class="col-md-10 offset-1">
		<h2 class="text-success">GIỎ HÀNG</h2>
		<h4 class="text-danger" th:text="${messageSLSP}"></h4>
		<h6 class="text-info"  th:text="${messageSLSP1}"></h6>
		<table class="table table-bordered table-default">
			<tr>
				<th>Tên sản phẩm</th>
				<th>Hình ảnh</th>
				<th>Giá</th>
				<th>Số lượng</th>
				<th>Thành tiền</th>
				<th>Action</th>
			</tr>
			<tbody>

				<tr th:each="item, iStat : ${cartSP}">
					<td th:text="${item.maSanPham.tenSanPham}"></td>
					<td><img alt=""
						th:src="@{/img/product/__${item.maSanPham.anhSanPham}__}"
						height="100px"></td>
					<td th:text="${item.maSanPham.donGia}"></td>
					<td><input type="number"  onchange="capNhatSLSP(this)"
						th:value="${item.soLuong}"> <br>
						<a th:if="${item.soLuong}==${item.maSanPham.soLuongTon}">*Số lượng tối đa có thể đặt</a>
						</td>
					<td class="amount"
						th:text="${#numbers.formatInteger(item.maSanPham.donGia*item.soLuong,0)}">
					</td>
					<td class="text-danger"><a
						th:href="@{/cart/item/delete?maGioHang=__${item.maGioHang.id}__&maSanPham=__${item.maSanPham.id}__}"
						onclick="return confirm('Bạn có chắc muốn xóa sản phẩm này khỏi giỏ hàng?');"
						th:text="Xóa"></a></td>
				</tr>
			</tbody>
			<tfoot>
				<tr>
					<td colspan="6" th:text="'Tổng tiền: '+${total}"></td>
				</tr>
			</tfoot>
		</table>
		<a th:if="${total}!=null" th:href="@{/invoice/add}"
			onclick="return confirm('Xác nhận đặt hàng?');"
			class="btn btn-success" style="margin-bottom: 10px; color: white">Đặt
			hàng</a>
			<br>
			<h4 class="text-danger" th:text="${haha}"></h4>
			
	</div>

	<!-- start footer Area -->
	<footer class="footer-area section_gap">
		<div class="container">
			<div class="row">
				<div class="col-lg-3  col-md-6 col-sm-6">
					<div class="single-footer-widget">
						<h6>About Us</h6>
						<p>T Electronic Device is an authorized company to act as the
							main representative and distributor of high quality electronic
							and industrial electrical products and services in Vietnam
							market.</p>
						<!-- </p>The brands distributed by the company are world famous, including: Samsung, Apple, Lenovo...
						</p> -->
					</div>
				</div>
				<div class="col-lg-4  col-md-6 col-sm-6">
					<div class="single-footer-widget">
						<h6>Newsletter</h6>
						<p>Stay update with our latest</p>
						<div class="" id="mc_embed_signup">

							<form target="_blank" novalidate="true"
								action="https://spondonit.us12.list-manage.com/subscribe/post?u=1462626880ade1ac87bd9c93a&amp;id=92a4423d01"
								method="get" class="form-inline">

								<div class="d-flex flex-row">

									<input class="form-control" name="EMAIL"
										placeholder="Enter Email" onfocus="this.placeholder = ''"
										onblur="this.placeholder = 'Enter Email '" required=""
										type="email">


									<button class="click-btn btn btn-default">
										<i class="fa fa-long-arrow-right" aria-hidden="true"></i>
									</button>
									<div style="position: absolute; left: -5000px;">
										<input name="b_36c4fd991d266f23781ded980_aefe40901a"
											tabindex="-1" value="" type="text">
									</div>

									<!-- <div class="col-lg-4 col-md-4">
												<button class="bb-btn btn"><span class="lnr lnr-arrow-right"></span></button>
											</div>  -->
								</div>
								<div class="info"></div>
							</form>

						</div>
					</div>
				</div>
				<div class="col-lg-3  col-md-6 col-sm-6">
					<div class="single-footer-widget mail-chimp">
						<h6 class="mb-20">Nationwide Branch</h6>
						<ul>
							<li><p>72 Võ Văn Kiệt, Bình Thùy, Cần Thơ</p></li>
							<li><p>172 Cái Khế, Ninh Kiều, Cần Thơ</p></li>
							<li><p>108 An Dương Vương, Q1, TPHCM</p></li>
							<li><p>97 Kha Vạn Cân, Thủ Đức, TPHCM</p></li>
						</ul>
					</div>
				</div>
				<div class="col-lg-2 col-md-6 col-sm-6">
					<div class="single-footer-widget">
						<h6>Follow Us</h6>
						<p>Let us be social</p>
						<div class="footer-social d-flex align-items-center">
							<a href="#"><i class="fa fa-facebook"></i></a> <a href="#"><i
								class="fa fa-twitter"></i></a> <a href="#"><i
								class="fa fa-dribbble"></i></a>
						</div>
					</div>
				</div>
			</div>
			<div
				class="footer-bottom d-flex justify-content-center align-items-center flex-wrap">
				<p class="footer-text m-0">
					T Electronic equipment always accompanies you <i
						class="fa fa-heart-o" aria-hidden="true"></i>

				</p>
			</div>
		</div>
	</footer>
	<!-- End footer Area -->
	<script th:src="@{/js/vendor/jquery-2.2.4.min.js}"></script>
	<script
		src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js"
		integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4"
		crossorigin="anonymous"></script>
	<script th:src="@{/js/vendor/bootstrap.min.js}"></script>
	<script th:src="@{/js/jquery.ajaxchimp.min.js}"></script>
	<script th:src="@{/js/jquery.nice-select.min.js}"></script>
	<script th:src="@{/js/jquery.sticky.js}"></script>
	<script th:src="@{/js/nouislider.min.js}"></script>
	<script th:src="@{/js/jquery.magnific-popup.min.js}"></script>
	<script th:src="@{/js/owl.carousel.min.js}"></script>
	<!--gmaps Js-->
	<script
		src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCjCGmQ0Uq4exrzdcL6rvxywDDOvfAu6eE"></script>
	<script th:src="@{/js/gmaps.min.js}"></script>
	<script th:src="@{/js/main.js}"></script>
	<script>
		function capNhatSLSP(input) {
			var tenSanPham = $(input).closest('tr').find('td:eq(0)').text();
			var donGia = $(input).closest('tr').find('td:eq(2)').text();
			var soLuong = $(input).val();
			var thanhTien = donGia * soLuong;
			$(input).closest('tr').find('.amount').text(thanhTien);

			$.ajax({
				url : "/cart/item/update",
				type : "POST",
				data : {
					tenSanPham : tenSanPham,
					soLuong : soLuong
				},
				success : function(response) {
					location.reload();
				},
				error : function(xhr) {
					console.log(xhr.responseText);
					location.reload();

				}
			});
		}
	</script>
</body>

</html>